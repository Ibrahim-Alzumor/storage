<div *ngIf="auth.clearanceLevel >= 2; else noAccess" class="container mt-4">
  <h2>Register New User</h2>
  <form (ngSubmit)="onRegister()" [formGroup]="registerForm">
    <div class="form-group">
      <label>First Name</label>
      <input
        [ngClass]="{'invalid': this.registerForm.controls['firstName'].invalid && this.registerForm.controls['firstName'].touched}"
        formControlName="firstName"
        id="firstName"
        placeholder="Enter your First Name"
      />
      <div *ngIf="firstNameErrorMessage" class="error-message">
        <span>{{ firstNameErrorMessage }}</span>
      </div>
    </div>


    <div class="form-group">
      <label>Last Name</label>
      <input
        [ngClass]="{'invalid': this.registerForm.controls['lastName'].invalid && this.registerForm.controls['lastName'].touched}"
        formControlName="lastName"
        id="lastName"
        placeholder="Enter your Last Name"
      />
      <div *ngIf="lastNameErrorMessage" class="error-message">
        <span>{{ lastNameErrorMessage }}</span>
      </div>
    </div>


    <div class="form-group">
      <label>Email</label>
      <input
        [ngClass]="{'invalid': registerForm.controls['email'].invalid && registerForm.controls['email'].touched}"
        formControlName="email"
        id="email"
        type="email"
      />
      <div *ngIf="emailErrorMessage" class="error-message">
        <span>{{ emailErrorMessage }}</span>
      </div>
    </div>


    <div class="form-group">
      <label>Password</label>
      <input
        [ngClass]="{'invalid': this.registerForm.controls['password'].invalid && this.registerForm.controls['password'].touched}"
        formControlName="password"
        id="password"
        placeholder="Enter your password"
        type="password"
      />
      <div *ngIf="passwordErrorMessage" class="error-message">
        <span>{{ passwordErrorMessage }}</span>
      </div>
    </div>


    <div class="form-group">
      <label>Job Title</label>
      <input class="form-control" formControlName="jobTitle"/>
    </div>


    <div class="form-group">
      <label>Phone</label>
      <input
        [ngClass]="{'invalid': registerForm.controls['phone'].invalid && registerForm.controls['phone'].touched}"
        formControlName="phone"
        id="phone"
        type="text"
      />
      <div *ngIf="phoneErrorMessage" class="error-message">
        <span>{{ phoneErrorMessage }}</span>
      </div>
    </div>
    <div class="form-group">
      <label>Clearance Level</label>
      <select class="form-control" formControlName="clearanceLevel">
        @for (level of possibleClearanceLevels; track $index) {
          <option [value]="level.value">
            {{ level.label }}
          </option>
        }
      </select>
    </div>


    <button [disabled]="registerForm.invalid" class="btn btn-primary" type="submit">Register</button>
  </form>
</div>
<ng-template #noAccess>
  <p class="mt-4 text-danger">You do not have permission to access this page.</p>
</ng-template>
